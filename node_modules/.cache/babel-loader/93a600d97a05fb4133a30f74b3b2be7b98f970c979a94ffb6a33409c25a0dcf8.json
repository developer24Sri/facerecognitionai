{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/DELL/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/DELL/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var video=document.getElementById(\"video\");Promise.all([faceapi.nets.ssdMobilenetv1.loadFromUri(\"/models\"),faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\"),faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\")]).then(startWebcam);function startWebcam(){navigator.mediaDevices.getUserMedia({video:true,audio:false}).then(function(stream){video.srcObject=stream;}).catch(function(error){console.error(error);});}function getLabeledFaceDescriptions(){var labels=[\"willsmith\",\"kholi\",\"spock\",\"ironman\",\"abdulkalam\",\"srivatsan\",\"dhoni(thala)\"];return Promise.all(labels.map(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(label){var descriptions,i,img,detections;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:descriptions=[];i=1;case 2:if(!(i<=2)){_context.next=13;break;}_context.next=5;return faceapi.fetchImage(\"./labels/\".concat(label,\"/\").concat(i,\".jpg\"));case 5:img=_context.sent;_context.next=8;return faceapi.detectSingleFace(img).withFaceLandmarks().withFaceDescriptor();case 8:detections=_context.sent;descriptions.push(detections.descriptor);case 10:i++;_context.next=2;break;case 13:return _context.abrupt(\"return\",new faceapi.LabeledFaceDescriptors(label,descriptions));case 14:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()));}video.addEventListener(\"play\",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var labeledFaceDescriptors,faceMatcher,canvas,displaySize;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getLabeledFaceDescriptions();case 2:labeledFaceDescriptors=_context3.sent;faceMatcher=new faceapi.FaceMatcher(labeledFaceDescriptors);canvas=faceapi.createCanvasFromMedia(video);document.body.append(canvas);displaySize={width:video.width,height:video.height};faceapi.matchDimensions(canvas,displaySize);setInterval(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var detections,resizedDetections,results;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return faceapi.detectAllFaces(video).withFaceLandmarks().withFaceDescriptors();case 2:detections=_context2.sent;resizedDetections=faceapi.resizeResults(detections,displaySize);canvas.getContext(\"2d\").clearRect(0,0,canvas.width,canvas.height);results=resizedDetections.map(function(d){return faceMatcher.findBestMatch(d.descriptor);});results.forEach(function(result,i){var box=resizedDetections[i].detection.box;var drawBox=new faceapi.draw.DrawBox(box,{label:result});drawBox.draw(canvas);});case 7:case\"end\":return _context2.stop();}},_callee2);})),100);case 9:case\"end\":return _context3.stop();}},_callee3);})));","map":{"version":3,"names":["video","document","getElementById","Promise","all","faceapi","nets","ssdMobilenetv1","loadFromUri","faceRecognitionNet","faceLandmark68Net","then","startWebcam","navigator","mediaDevices","getUserMedia","audio","stream","srcObject","catch","error","console","getLabeledFaceDescriptions","labels","map","label","descriptions","i","fetchImage","img","detectSingleFace","withFaceLandmarks","withFaceDescriptor","detections","push","descriptor","LabeledFaceDescriptors","addEventListener","labeledFaceDescriptors","faceMatcher","FaceMatcher","canvas","createCanvasFromMedia","body","append","displaySize","width","height","matchDimensions","setInterval","detectAllFaces","withFaceDescriptors","resizedDetections","resizeResults","getContext","clearRect","results","d","findBestMatch","forEach","result","box","detection","drawBox","draw","DrawBox"],"sources":["C:/Users/DELL/desktop/myprojects/facerec/src/index.js"],"sourcesContent":["const video = document.getElementById(\"video\");\r\n\r\nPromise.all([\r\n  faceapi.nets.ssdMobilenetv1.loadFromUri(\"/models\"),\r\n  faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\"),\r\n  faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"),\r\n]).then(startWebcam);\r\n\r\nfunction startWebcam() {\r\n  navigator.mediaDevices\r\n    .getUserMedia({\r\n      video: true,\r\n      audio: false,\r\n    })\r\n    .then((stream) => {\r\n      video.srcObject = stream;\r\n    })\r\n    .catch((error) => {\r\n      console.error(error);\r\n    });\r\n}\r\n\r\nfunction getLabeledFaceDescriptions() {\r\n  const labels = [\"willsmith\", \"kholi\", \"spock\",\"ironman\",\"abdulkalam\",\"srivatsan\",\"dhoni(thala)\"];\r\n  return Promise.all(\r\n    labels.map(async (label) => {\r\n      const descriptions = [];\r\n      for (let i = 1; i <= 2; i++) {\r\n        const img = await faceapi.fetchImage(`./labels/${label}/${i}.jpg`);\r\n        const detections = await faceapi\r\n          .detectSingleFace(img)\r\n          .withFaceLandmarks()\r\n          .withFaceDescriptor();\r\n        descriptions.push(detections.descriptor);\r\n      }\r\n      return new faceapi.LabeledFaceDescriptors(label, descriptions);\r\n    })\r\n  );\r\n}\r\n\r\nvideo.addEventListener(\"play\", async () => {\r\n  const labeledFaceDescriptors = await getLabeledFaceDescriptions();\r\n  const faceMatcher = new faceapi.FaceMatcher(labeledFaceDescriptors);\r\n\r\n  const canvas = faceapi.createCanvasFromMedia(video);\r\n  document.body.append(canvas);\r\n\r\n  const displaySize = { width: video.width, height: video.height };\r\n  faceapi.matchDimensions(canvas, displaySize);\r\n\r\n  setInterval(async () => {\r\n    const detections = await faceapi\r\n      .detectAllFaces(video)\r\n      .withFaceLandmarks()\r\n      .withFaceDescriptors();\r\n\r\n    const resizedDetections = faceapi.resizeResults(detections, displaySize);\r\n\r\n    canvas.getContext(\"2d\").clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    const results = resizedDetections.map((d) => {\r\n      return faceMatcher.findBestMatch(d.descriptor);\r\n    });\r\n    results.forEach((result, i) => {\r\n      const box = resizedDetections[i].detection.box;\r\n      const drawBox = new faceapi.draw.DrawBox(box, {\r\n        label: result,\r\n      });\r\n      drawBox.draw(canvas);\r\n    });\r\n  }, 100);\r\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}